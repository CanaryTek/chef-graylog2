#
# Generated by Chef
#

PassengerRuby /var/www/graylog2-web-interface/.rvm/bin/ruby
PassengerRoot /var/www/graylog2-web-interface/.rvm/gems/ruby-1.9.3-p125/bin/passenger
PassengerMaxPoolSize 10

<VirtualHost *:80>
    ServerSignature Off
    DocumentRoot <%= node[:graylog2][:web_path] %>/current/public

    LogLevel warn
    ErrorLog    /var/log/apache2/graylog2-web-interface-error.log
    CustomLog   /var/log/apache2/graylog2-web-interface-access.log combined

    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
    RewriteLog /var/log/apache2/graylog2-web-interface-rewrite.log
</VirtualHost>

<VirtualHost *:443>
    ServerSignature Off
    DocumentRoot <%= node[:graylog2][:web_path] %>/current/public

    LogLevel warn
    ErrorLog    /var/log/apache2/graylog2-web-interface-error.log
    CustomLog   /var/log/apache2/graylog2-web-interface-access.log combined

    SSLEngine on
    SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

   <Directory <%= node[:graylog2][:web_path] %>/current/public>
     Allow from all
     Options -MultiViews
   </Directory>
</VirtualHost>



